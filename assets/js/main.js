!function(){Notification=function(){$errorHolder=$(".js-errorHolder"),this.showMessage=function(a,b){$errorHolder.addClass(b).text(a).removeClass("m-hidden")},this.hideMessage=function(a){$errorHolder.addClass("m-hidden").removeClass(a)}},columnTypes={string:{$template:$('<input data-type="string" class="form-control table-input js-input" type="string"/>'),build:function(a,b){a.attr("placeholder",b),a.attr("data-name",b)},getValue:function(a){return a.val()}},textarea:{$template:$('<textarea data-type="textarea" class="form-control js-input"/>'),build:function(a,b){a.attr("placeholder",b),a.attr("data-name",b)},getValue:function(a){return a.val()}},bool:{$template:$('<div class="js-input" data-type="bool"><label class="radio-inline"><input name="" class="js-true" type="radio" value="1"> true</label><label class="radio-inline"><input name="" type="radio" value="0"> false</label></div>'),build:function(a,b,c){a.attr("data-name",b),a.find("input").attr("name","column-"+b+"-"+c)},getValue:function(a){return a.find(".js-true").prop("checked")}},number:{$template:$('<input data-type="number" type="number" class="form-control table-input js-input"/>'),build:function(a,b){a.attr("data-name",b)},getValue:function(a){return parseFloat(a.val(),10)}}},jsonEditor=function(){var a=$(".js-addForm"),b=$(".js-selectType"),c=$(".js-columnName"),d=$(".js-editorTable"),e=d.find("thead>tr"),f=d.children("tbody"),g=$(".js-getOutput"),h=$(".js-output"),i=new Notification,j=columnTypes,k={$th:$('<th class="m-heading m-input"><span class="name"/><small class="glyphicon glyphicon-remove pull-right js-remove"/></th>'),$td:$('<td class="m-input"/>'),$number:$('<td class="m-number"/>')},l=0,m={},n=$(".js-optionsHolder"),o=function(a,b){var c=k.$th.clone(),d=k.$td.clone(),g=j[a].$template.clone();c.attr("data-name",b).addClass("m-type-"+a).find(".name").text(b),e.append(c),$tr=f.find("tr");for(var h=0;h<$tr.length;h++)j[a].build(g,b,h),d.attr("data-name",b).html("").append(g.clone()),$tr.eq(h).append(d.clone());i.showMessage("Column added","btn-success"),clearTimeout(l),l=setTimeout(function(){i.hideMessage("btn-success")},500)},p=function(a){e.find("th[data-name="+a+"]").remove(),f.find("td[data-name="+a+"]").remove()},q=function(){var a=f.find("tr").last().clone(),b=a.find(".m-number");a.find("input.js-input").val(""),b.text(parseInt(b.text(),10)+1),a.find("input[type=radio]").each(function(){var a=this.getAttribute("name");a=a.replace(/\d+/,b.text()),this.setAttribute("name",a)}),a.appendTo(f)},r=function(){return null===b.val()?(b.parent().addClass("has-error"),i.showMessage("Error: no column type","btn-danger"),!1):(b.parent().removeClass("has-error"),""===c.val()?(c.parent().addClass("has-error"),i.showMessage("Error: no column name","btn-danger"),!1):(c.parent().removeClass("has-error"),i.hideMessage("btn-danger"),!0))},s=function(){var a=[];return f.children("tr").each(function(){var b={};$(this).find(".js-input").each(function(){var a=j[this.getAttribute("data-type")].getValue($(this)),c=m.keepEmpty||a||a===!1||0===a;c&&(b[this.getAttribute("data-name")]=j[this.getAttribute("data-type")].getValue($(this)))}),Object.getOwnPropertyNames(b).length>0&&a.push(b)}),a};a.on("submit",function(a){return a.preventDefault(),r()&&o(b.val(),c.val()),!1}),d.on("click",".js-remove",function(){p($(this).parent().attr("data-name"))}),d.on("keyup change","tr:last-child .js-input",function(){this.value.length>0&&q()}),n.on("change",".js-optionTrigger",function(){m[this.name]=this.checked}),g.on("click",function(){h.val(m.formatted?JSON.stringify(s(),null,2):JSON.stringify(s()))})},jQuery(document).ready(function(){jsonEditor()})}();
//# sourceMappingURL=main.map