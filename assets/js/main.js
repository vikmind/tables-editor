jsonEditor=function(){var a=$(".js-addForm"),b=$(".js-selectType"),c=$(".js-columnName"),d=$(".js-editorTable"),e=d.find("thead>tr"),f=d.children("tbody"),g=$(".js-getOutput"),h=$(".js-output"),i=$(".js-errorHolder"),j={string:{$template:$('<input class="form-control table-input js-input" type="string"/>'),build:function(a,b){a.attr("placeholder",b),a.attr("data-name",b),a.attr("data-type","string")},getValue:function(a){return a.val()}},textarea:{$template:$('<textarea class="form-control js-input"/>'),build:function(a,b){a.attr("placeholder",b),a.attr("data-name",b),a.attr("data-type","textarea")},getValue:function(a){return a.val()}},bool:{$template:$('<div class="js-input"><label class="radio-inline"><input name="" checked class="js-true" type="radio" value="1"> true</label><label class="radio-inline"><input name="" type="radio" value="0"> false</label></div>'),build:function(a,b,c){a.attr("data-name",b),a.find("input").attr("name","column-"+b+"-"+c),a.attr("data-type","bool")},getValue:function(a){return a.find(".js-true").prop("checked")}},number:{$template:$('<input type="number" class="form-control table-input js-input"/>'),build:function(a,b){a.attr("data-name",b),a.attr("data-type","number")},getValue:function(a){return parseFloat(a.val(),10)}}},k={$th:$('<th class="m-heading m-input"><span class="name"/><small class="glyphicon glyphicon-remove pull-right js-remove"/></th>'),$td:$('<td class="m-input"/>'),$number:$('<td class="m-number"/>')},l=!1,m=function(a,b){var c=k.$th.clone(),d=k.$td.clone(),g=j[a].$template.clone();c.attr("data-name",b).addClass("m-type-"+a).find(".name").text(b),e.append(c),$tr=f.find("tr");for(var h=0;h<$tr.length;h++)j[a].build(g,b,h),d.attr("data-name",b).html("").append(g.clone()),$tr.eq(h).append(d.clone())},n=function(a){e.find("th[data-name="+a+"]").remove(),f.find("td[data-name="+a+"]").remove()},o=function(){var a=f.find("tr").last().clone(),b=a.find(".m-number");a.find("input.js-input").val(""),b.text(parseInt(b.text(),10)+1),a.find("input[type=radio]").each(function(){var a=this.getAttribute("name");a=a.replace(/\d+/,b.text()),this.setAttribute("name",a)}),a.appendTo(f)},p=function(){return null===b.val()?(b.parent().addClass("has-error"),q("Error: no column type"),!1):(b.parent().removeClass("has-error"),""===c.val()?(c.parent().addClass("has-error"),q("Error: no column name"),!1):(c.parent().removeClass("has-error"),r(),!0))},q=function(a){i.text(a),i.removeClass("m-hidden"),$(".js-btnAddcolumn").hide()},r=function(){i.addClass("m-hidden"),$(".js-btnAddcolumn").show()},s=function(){var a=[];f.children("tr").each(function(){var b={};$(this).find(".js-input").each(function(){j[this.getAttribute("data-type")].getValue($(this))&&(b[this.getAttribute("data-name")]=j[this.getAttribute("data-type")].getValue($(this)))}),Object.getOwnPropertyNames(b).length>0&&a.push(b)}),h.val(JSON.stringify(a))};a.on("submit",function(a){return a.preventDefault(),p()&&m(b.val(),c.val()),!1}),d.on("click",".js-remove",function(){n($(this).parent().attr("data-name"))}),d.on("focus","tr:last-child .js-input",function(){l||o()}),g.on("click",s)},jQuery(document).ready(function(){jsonEditor()});
//# sourceMappingURL=main.map